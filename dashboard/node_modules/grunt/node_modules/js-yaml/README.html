<h1 id="JS-YAML_-_YAML_1-2_parser_and_serializer_for_JavaScript">JS-YAML - YAML 1.2 parser and serializer for JavaScript</h1>
<p><a href="http://travis-ci.org/nodeca/js-yaml"><img src="https://secure.travis-ci.org/nodeca/js-yaml.png" alt="Build Status"></a></p>
<p><a href="http://nodeca.github.com/js-yaml/">Online Demo</a></p>
<p>This is an implementation of <a href="http://yaml.org/">YAML</a>, a human friendly data<br>serialization language. Started as <a href="http://pyyaml.org/">PyYAML</a> port, it was<br>completely rewritten from scratch. Now it’s very fast, and supports 1.2 spec.</p>
<h2 id="Breaking_changes_in_1-x-x_-&gt;_2-0-x">Breaking changes in 1.x.x -&gt; 2.0.x</h2>
<p>If your have not used <strong>custom</strong> tags or loader classes - no changes needed. Just<br>upgrade library and enjoy high parse speed.</p>
<p>In other case, you should rewrite your tag constructors and custom loader<br>classes, to conform new schema-based API. See<br><a href="https://github.com/nodeca/js-yaml/tree/master/examples">examples</a> and<br><a href="https://github.com/nodeca/js-yaml/wiki">wiki</a> for details.<br>Note, that parser internals were completely rewritten.</p>
<h2 id="Installation">Installation</h2>
<h3 id="YAML_module_for_node-js">YAML module for node.js</h3>
<pre><code>npm <span class="keyword">install</span> js-yaml
</code></pre><h3 id="CLI_executable">CLI executable</h3>
<p>If you want to inspect your YAML files from CLI, install js-yaml globally:</p>
<pre><code>npm install js<span class="attribute">-yaml</span> <span class="attribute">-g</span>
</code></pre><h4 id="Usage">Usage</h4>
<pre><code><span class="attribute">usage</span>: <span class="string">js-yaml [-h] [-v] [-c] [-j] [-t] file</span>

<span class="haml">Positional arguments:
  file           File with YAML document(s)

Optional arguments:
  -<span class="ruby">h, --help     <span class="constant">Show</span> this help message <span class="keyword">and</span> exit.
</span>  -<span class="ruby">v, --version  <span class="constant">Show</span> program<span class="string">'s version number and exit.
</span></span>  -<span class="ruby">c, --compact  <span class="constant">Display</span> errors <span class="keyword">in</span> compact mode
</span>  -<span class="ruby">j, --to-json  <span class="constant">Output</span> a non-funky boring <span class="constant">JSON</span>
</span>  -<span class="ruby">t, --trace    <span class="constant">Show</span> stack trace on error</span></span>
</code></pre><h3 id="Bundled_YAML_library_for_browsers">Bundled YAML library for browsers</h3>
<pre><code class="html"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js-yaml.min.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript">
<span class="keyword">var</span> doc = jsyaml.load(<span class="string">'greeting: hello\nname: world'</span>);
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</code></pre>
<p>Browser support was done mostly for online demo. If you find any errors - feel<br>free to send pull requests with fixes. Also note, that IE and other old browsers<br>needs <a href="https://github.com/kriskowal/es5-shim">es5-shims</a> to operate.</p>
<h2 id="API">API</h2>
<p>Here we cover the most ‘useful’ methods. If you need advanced details (creating<br>your own tags), see <a href="https://github.com/nodeca/js-yaml/wiki">wiki</a> and<br><a href="https://github.com/nodeca/js-yaml/tree/master/examples">examples</a> for more<br>info.</p>
<p>In node.js JS-YAML automatically registers handlers for <code>.yml</code> and <code>.yaml</code><br>files. You can load them just with <code>require</code>. That’s mostly equivalent to<br>calling <code>load()</code> on fetched content of a file. Just with one string!</p>
<pre><code class="javascript"><span class="built_in">require</span>(<span class="string">'js-yaml'</span>);

<span class="comment">// Get document, or throw exception on error</span>
<span class="keyword">try</span> {
  <span class="keyword">var</span> doc = <span class="built_in">require</span>(<span class="string">'/home/ixti/example.yml'</span>);
  console.log(doc);
} <span class="keyword">catch</span> (e) {
  console.log(e);
}
</code></pre>
<h3 id="load_(string_[_,_options_])">load (string [ , options ])</h3>
<p>Parses <code>string</code> as single YAML document. Returns a JavaScript object or throws<br><code>YAMLException</code> on error.</p>
<p>NOTE: This function <strong>does not</strong> understands multi-document sources, it throws<br>exception on those.</p>
<p>options:</p>
<ul>
<li><code>filename</code> <em>(default: null)</em> - string to be used as a file path in<br>error/warning messages.</li>
<li><code>strict</code> <em>(default - false)</em> makes the loader to throw errors instead of<br>warnings.</li>
<li><code>schema</code> <em>(default: <code>DEFAULT_SCHEMA</code>)</em> - specifies a schema to use.</li>
</ul>
<h3 id="loadAll_(string,_iterator_[_,_options_])">loadAll (string, iterator [ , options ])</h3>
<p>Same as <code>load()</code>, but understands multi-document sources and apply <code>iterator</code> to<br>each document.</p>
<pre><code class="javascript"><span class="keyword">var</span> yaml = <span class="built_in">require</span>(<span class="string">'js-yaml'</span>);

yaml.loadAll(data, <span class="function"><span class="keyword">function</span> <span class="params">(doc)</span> {</span>
  console.log(doc);
});
</code></pre>
<h3 id="safeLoad_(string_[_,_options_])">safeLoad (string [ , options ])</h3>
<p>Same as <code>load()</code> but uses <code>SAFE_SCHEMA</code> by default - only recommended tags of<br>YAML specification (no JavaScript-specific tags, e.g. <code>!!js/regexp</code>).</p>
<h3 id="safeLoadAll_(string,_iterator_[_,_options_])">safeLoadAll (string, iterator [ , options ])</h3>
<p>Same as <code>loadAll()</code> but uses <code>SAFE_SCHEMA</code> by default - only recommended tags of<br>YAML specification (no JavaScript-specific tags, e.g. <code>!!js/regexp</code>).</p>
<h3 id="dump_(object_[_,_options_])">dump (object [ , options ])</h3>
<p>Serializes <code>object</code> as YAML document.</p>
<p>options:</p>
<ul>
<li><code>indent</code> <em>(default: 2)</em> - indentation width to use (in spaces).</li>
<li><code>flowLevel</code> (default: -1) - specifies level of nesting, when to switch from<br>block to flow style for collections. -1 means block style everwhere</li>
<li><code>styles</code> - “tag” =&gt; “style” map. Each tag may have own set of styles.</li>
<li><code>schema</code> <em>(default: <code>DEFAULT_SCHEMA</code>)</em> specifies a schema to use.</li>
</ul>
<p>styles:</p>
<pre><code class="none">!!<span class="keyword">null</span>
  <span class="string">"canonical"</span>   =&gt; <span class="string">"~"</span>

!!int
  <span class="string">"binary"</span>      =&gt; <span class="string">"0b1"</span>, <span class="string">"0b101010"</span>, <span class="string">"0b1110001111010"</span>
  <span class="string">"octal"</span>       =&gt; <span class="string">"01"</span>, <span class="string">"052"</span>, <span class="string">"016172"</span>
  <span class="string">"decimal"</span>     =&gt; <span class="string">"1"</span>, <span class="string">"42"</span>, <span class="string">"7290"</span>
  <span class="string">"hexadecimal"</span> =&gt; <span class="string">"0x1"</span>, <span class="string">"0x2A"</span>, <span class="string">"0x1C7A"</span>

!!<span class="keyword">null</span>, !!bool, !!float
  <span class="string">"lowercase"</span>   =&gt; <span class="string">"null"</span>, <span class="string">"true"</span>, <span class="string">"false"</span>, <span class="string">".nan"</span>, <span class="string">'.inf'</span>
  <span class="string">"uppercase"</span>   =&gt; <span class="string">"NULL"</span>, <span class="string">"TRUE"</span>, <span class="string">"FALSE"</span>, <span class="string">".NAN"</span>, <span class="string">'.INF'</span>
  <span class="string">"camelcase"</span>   =&gt; <span class="string">"Null"</span>, <span class="string">"True"</span>, <span class="string">"False"</span>, <span class="string">".NaN"</span>, <span class="string">'.Inf'</span>
</code></pre>
<p>By default, !!int uses <code>decimal</code>, and !!null, !!bool, !!float use <code>lowercase</code>.</p>
<h3 id="safeDump_(object_[_,_options_])">safeDump (object [ , options ])</h3>
<p>Same as <code>dump()</code> but uses <code>SAFE_SCHEMA</code> by default - only recommended tags of<br>YAML specification (no JavaScript-specific tags, e.g. <code>!!js/regexp</code>).</p>
<h2 id="Supported_YAML_types">Supported YAML types</h2>
<p>The list of standard YAML tags and corresponding JavaScipt types. See also<br><a href="http://pyyaml.org/wiki/YAMLTagDiscussion">YAML tag discussion</a> and<br><a href="http://yaml.org/type/">YAML types repository</a>.</p>
<pre><code>!!null <span class="string">''</span>                   <span class="comment"># null</span>
!!bool <span class="string">'yes'</span>                <span class="comment"># bool</span>
!!int <span class="string">'3...'</span>                <span class="comment"># number</span>
!!float <span class="string">'3.14...'</span>           <span class="comment"># number</span>
!!binary <span class="string">'...base64...'</span>     <span class="comment"># buffer</span>
!!timestamp <span class="string">'YYYY-...'</span>      <span class="comment"># date</span>
!!omap [ <span class="keyword">...</span> ]              <span class="comment"># array of key-value pairs</span>
!!pairs [ <span class="keyword">...</span> ]             <span class="comment"># array or array pairs</span>
!!set { <span class="keyword">...</span> }               <span class="comment"># array of objects with given keys and null values</span>
!!str <span class="string">'...'</span>                 <span class="comment"># string</span>
!!seq [ <span class="keyword">...</span> ]               <span class="comment"># array</span>
!!map { <span class="keyword">...</span> }               <span class="comment"># object</span>
</code></pre><p><strong>JavaScript-specific tags</strong></p>
<pre><code>!!js<span class="regexp">/regexp /pattern/gim</span>            <span class="comment"># RegExp</span>
!!js/<span class="literal">undefined</span> <span class="string">''</span>                   <span class="comment"># Undefined</span>
!!js/<span class="reserved">function</span> <span class="string">'function () {...}'</span>   <span class="comment"># Function</span>
</code></pre><h2 id="Caveats">Caveats</h2>
<p>Note, that you use arrays or objects as key in JS-YAML. JS do not allows objects<br>or array as keys, and stringifies (by calling .toString method) them at the<br>moment of adding them.</p>
<pre><code class="yaml"><span class="tag">---</span>
? <span class="attr_selector">[ foo, bar ]</span>
: <span class="tag">-</span> <span class="tag">baz</span>
? <span class="rules">{ <span class="rule"><span class="attribute">foo</span>:<span class="value"> bar </span></span></span>}
: <span class="tag">-</span> <span class="tag">baz</span>
  <span class="tag">-</span> <span class="tag">baz</span>
</code></pre>
<pre><code class="javascript">{ <span class="string">"foo,bar"</span>: [<span class="string">"baz"</span>], <span class="string">"[object Object]"</span>: [<span class="string">"baz"</span>, <span class="string">"baz"</span>] }
</code></pre>
<p>Also, reading of properties on implicit block mapping keys is not supported yet.<br>So, the following YAML document cannot be loaded.</p>
<pre><code class="yaml">&amp;anchor foo:
  foo: bar
  *anchor: duplicate <span class="keyword">key</span>
  baz: bat
  *anchor: duplicate <span class="keyword">key</span>
</code></pre>
<h2 id="License">License</h2>
<p>View the <a href="https://github.com/nodeca/js-yaml/blob/master/LICENSE">LICENSE</a> file<br>(MIT).</p>
